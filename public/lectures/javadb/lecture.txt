JDBC
Java Database Connectivity
â˜• Java 25 Edition

Å to su relacijske baze podataka
JDBC arhitektura i kako radi
H2 baza podataka

ğŸ’» PraktiÄni dio

Spajanje na bazu podataka
Pripremanje i izvrÅ¡avanje upita
Kreiranje i dohvaÄ‡anje podataka

âš¡ Napredne teme

PreparedStatement vs Statement
Try-with-resources pattern
Rad s transakcijama

ğŸ›¡ï¸ Best Practices

Sigurno zatvaranje resursa
SprjeÄavanje SQL injection napada
Optimizacija performansi

ğŸ—„ï¸ Osnove baza podataka

Relacijske baze podataka (engl. relational databases) predstavljaju organizirane zbirke podataka koje koriste tablice s redcima i stupcima za pohranu informacija.

ğŸ’¡

RDBMS sustav omoguÄ‡ava:
Pouzdano upravljanje operacijama poput kreiranja tablica, spremanja, dohvaÄ‡anja, aÅ¾uriranja i brisanja podataka â€” sve uz odrÅ¾avanje konzistentnosti!

Najpopularnije baze podataka

ğŸ˜
PostgreSQL
Open source, moÄ‡na

ğŸ¬
MySQL
Najpopularnija

ğŸ”·
MS SQL Server
Enterprise rjeÅ¡enje

ğŸ”¶
Oracle
Industrijski standard

ğŸ§ª
H2
Idealna za razvoj

ğŸ¦
Apache Derby
Embedded baza

ğŸ”Œ Å to je JDBC?

JDBC (Java Database Connectivity) je Java API koji omoguÄ‡ava spajanje Java aplikacija na bilo koju relacijsku bazu podataka koriÅ¡tenjem odgovarajuÄ‡eg JDBC drivera.

Tri glavne aktivnosti

ğŸ”—
1. Povezivanje
Ostvarivanje veze s bazom podataka

ğŸ“
2. IzvrÅ¡avanje
SQL upiti za CRUD operacije

ğŸšª
3. Zatvaranje
OslobaÄ‘anje resursa

ğŸ¯

CRUD operacije
Create (INSERT) â€¢ Read (SELECT) â€¢ Update (UPDATE) â€¢ Delete (DELETE)

ğŸ—ï¸ JDBC arhitektura

â˜• Java Aplikacija

ğŸ“š JDBC API

ğŸ”§ JDBC Driver Manager

ğŸ—„ï¸ Oracle
ğŸ—„ï¸ MySQL
ğŸ—„ï¸ H2

Kako to funkcionira?

Iz Java aplikacije poziva se kod iz JDBC biblioteke
JDBC pomoÄ‡u drivera komunicira s bazom koriÅ¡tenjem SQL upita
Driveri SQL pozive pretvaraju u komunikacijski protokol specifiÄne baze

ğŸ“¦

Driver = JAR datoteka
Svaka baza ima svoj driver koji se dodaje kao dependency u projektu.

ğŸ§ª H2 baza podataka

H2 je open-source relacijska baza podataka u cijelosti implementirana u Javi. SavrÅ¡ena je za razvoj i testiranje!

âœ¨ Prednosti

ğŸš€ Super brza â€” idealna za razvoj
ğŸ“¦ Embedded mod â€” ne treba instalacija
ğŸŒ Server mod â€” za viÅ¡ekorisniÄke scenarije
ğŸ¨ Web konzola â€” vizualni pregled podataka
ğŸ’¾ In-memory â€” podaci u RAM-u

ğŸ“¥ Instalacija
Preuzmi s: h2database.com
Verzija: 2.4.240 (2025)

pom.xml

<!-- Maven dependency -->
<dependency>
<groupId>com.h2database</groupId>
<artifactId>h2</artifactId>
<version>2.4.240</version>
</dependency>

ğŸ”— Spajanje na bazu podataka

Prvi korak je kreiranje Connection objekta koji predstavlja vezu s bazom:

DatabaseConnection.java

try {
// Kreiranje veze s bazom podataka
Connection veza = DriverManager.getConnection(
"jdbc:h2:tcp://localhost/~/Java-2025",  // URL baze
"student",                                // korisniÄko ime
"student"                                 // lozinka
);

System.out.println("âœ… UspjeÅ¡no spojen na bazu!");

} catch (SQLException e) {
System.err.println("âŒ GreÅ¡ka: " + e.getMessage());
}

ğŸ” Struktura URL-a

jdbc:h2
Tip baze podataka

tcp://localhost/~/
Lokacija servera

Java-2025
Naziv baze

âš ï¸

SQLException
Ova checked iznimka obuhvaÄ‡a sve potencijalne probleme u radu s bazom â€” obavezno ju hvataj!

ğŸ“ Pripremanje i izvrÅ¡avanje upita

Za izvrÅ¡avanje SQL upita koristimo Statement objekt:

QueryExample.java

// Kreiranje Statement objekta iz Connection objekta
Statement stmt = veza.createStatement();

// IzvrÅ¡avanje SELECT upita â€” vraÄ‡a ResultSet
ResultSet rs = stmt.executeQuery(
"SELECT id, ime, prezime FROM STUDENTI"
);

// Iteriranje kroz rezultate
while (rs.next()) {
int id       = rs.getInt("id");
String ime   = rs.getString("ime");
String prezime = rs.getString("prezime");

System.out.println(id + ": " + ime + " " + prezime);
}

ğŸ“¦ ResultSet metode

getInt() â€” za INTEGER
getString() â€” za VARCHAR
getDouble() â€” za DECIMAL
getDate() â€” za DATE
getBoolean() â€” za BOOLEAN

ğŸ”„ Tip metode ovisi o operaciji

executeQuery() â€” SELECT
executeUpdate() â€” INSERT, UPDATE, DELETE
execute() â€” bilo koji SQL

ğŸ—ï¸ Kreiranje tablice STUDENTI

create_table.sql

CREATE TABLE STUDENTI (
id             INT          NOT NULL GENERATED ALWAYS AS IDENTITY,
jmbag          VARCHAR(20)  NOT NULL,
ime            VARCHAR(50)  NOT NULL,
prezime        VARCHAR(50)  NOT NULL,
datum_rodjenja DATE         NOT NULL,

PRIMARY KEY (id)
);

ğŸ“Š Struktura tablice

StupacTipOpis
idINTAuto-increment PK
jmbagVARCHAR(20)JMBAG studenta
imeVARCHAR(50)Ime studenta
prezimeVARCHAR(50)Prezime
datum_rodjenjaDATEDatum roÄ‘enja

ğŸ”‘

GENERATED ALWAYS AS IDENTITY
Automatski generira jedinstveni ID za svaki novi redak â€” zamjena za AUTO_INCREMENT u MySQL-u.

ğŸ“– DohvaÄ‡anje podataka â€” Java 25 stil

FetchStudents.java

final String URL = "jdbc:h2:tcp://localhost/~/Java-2025";
final String USER = "student";
final String PASS = "student";

// âœ¨ Try-with-resources â€” automatski zatvara sve resurse!
try (
Connection veza = DriverManager.getConnection(URL, USER, PASS);
Statement stmt = veza.createStatement();
ResultSet rs = stmt.executeQuery("SELECT * FROM STUDENTI")
) {
while (rs.next()) {
var id      = rs.getInt("id");
var jmbag   = rs.getString("jmbag");
var ime     = rs.getString("ime");
var prezime = rs.getString("prezime");
var datum   = rs.getObject("datum_rodjenja", LocalDate.class);

System.out.println(STR."Student: \{id} \{jmbag} \{ime} \{prezime} \{datum}");
}
} catch (SQLException e) {
e.printStackTrace();
}

ğŸ“¤ Output
Student: 1 0036374849 Pero PeriÄ‡ 1994-01-01
Student: 2 0024568238 Ivo IviÄ‡ 1993-01-01

ğŸ†•

Java 25 novosti u ovom primjeru
var za type inference â€¢ STR template za string interpolaciju â€¢ LocalDate direktno iz ResultSet-a

âš¡ PreparedStatement â€” sigurnije i brÅ¾e!

âŒ Statement â€” NE RADI OVO!

// Ranjivo na SQL injection! ğŸ’€
String sql = "SELECT * FROM STUDENTI " +
"WHERE jmbag = '" + userInput + "'";
stmt.executeQuery(sql);

âœ… PreparedStatement â€” KORISTI OVO!

// Sigurno â€” parametri su escapirani! ğŸ›¡ï¸
String sql = "SELECT * FROM STUDENTI " +
"WHERE jmbag = ?";
pstmt.setString(1, userInput);

PreparedStatementExample.java

// UPDATE s parametrima
String updateSql = "UPDATE STUDENTI SET ime = ? WHERE jmbag = ?";

try (PreparedStatement pstmt = veza.prepareStatement(updateSql)) {
pstmt.setString(1, "Å½eljko");    // 1. parametar (ime)
pstmt.setString(2, "0024568238"); // 2. parametar (jmbag)

int affectedRows = pstmt.executeUpdate();
System.out.println("AÅ¾urirano redaka: " + affectedRows);
}

ğŸ›¡ï¸ Prednosti

ZaÅ¡tita od SQL injection napada
BrÅ¾e â€” upit se kompajlira samo jednom
ÄŒitljiviji kod s parametrima

ğŸ”¢

Parametri poÄinju od 1!
Za razliku od nizova, JDBC parametri su 1-indexed: prvi je ? ima indeks 1, ne 0.

â• Spremanje novih podataka

InsertStudent.java

String insertSql = """
INSERT INTO STUDENTI (jmbag, ime, prezime, datum_rodjenja)
VALUES (?, ?, ?, ?)
""";

try (PreparedStatement pstmt = veza.prepareStatement(insertSql)) {

// Postavljanje vrijednosti parametara
pstmt.setString(1, "0012345678");
pstmt.setString(2, "Ana");
pstmt.setString(3, "AniÄ‡");
pstmt.setObject(4, LocalDate.of(2000, 5, 15));

// IzvrÅ¡avanje INSERT naredbe
int result = pstmt.executeUpdate();

if (result > 0) {
System.out.println("âœ… Student uspjeÅ¡no dodan!");
}

} catch (SQLException e) {
System.err.println("âŒ GreÅ¡ka: " + e.getMessage());
}

ğŸ“

Text Blocks (Java 15+)
Koristi """ za viÅ¡elinijske stringove â€” SQL upiti su puno Äitljiviji!

ğŸ“Š Metode za razliÄite tipove

setString() â†’ VARCHAR, CHAR
setInt() â†’ INTEGER
setLong() â†’ BIGINT

setDouble() â†’ DOUBLE, FLOAT
setObject() â†’ LocalDate, LocalDateTime
setBoolean() â†’ BOOLEAN

ğŸšª Zatvaranje veze s bazom

Uvijek moramo zatvoriti resurse! Pogledaj razliku izmeÄ‘u starog i novog naÄina:

âŒ Stari naÄin â€” verbose i error-prone

Connection veza = null;
Statement stmt = null;
ResultSet rs = null;

try {
veza = DriverManager.getConnection(...);
stmt = veza.createStatement();
rs = stmt.executeQuery("SELECT...");
// obrada rezultata...
} catch (SQLException e) {
e.printStackTrace();
} finally {
try {
if (rs != null) rs.close();
if (stmt != null) stmt.close();
if (veza != null) veza.close();
} catch (SQLException ex) {
ex.printStackTrace();
}
}

âœ… Try-with-resources â€” Äisto i sigurno

try (
Connection veza = DriverManager.getConnection(...);
Statement stmt = veza.createStatement();
ResultSet rs = stmt.executeQuery("SELECT...")
) {
// obrada rezultata...
while (rs.next()) {
// ...
}

} catch (SQLException e) {
e.printStackTrace();
}

// Resursi se automatski zatvaraju! ğŸ‰

ğŸ’¡

ZaÅ¡to try-with-resources?
Sve klase koje implementiraju AutoCloseable (Connection, Statement, ResultSet) automatski se zatvaraju na kraju bloka â€” Äak i ako doÄ‘e do iznimke!

ğŸ”„ Transakcije â€” sve ili niÅ¡ta!

Transakcija = skup operacija koje se moraju izvrÅ¡iti zajedno kao jedna atomarna cjelina. Ili sve uspije, ili se sve vraÄ‡a na staro stanje.

TransactionExample.java

try (Connection veza = DriverManager.getConnection(URL, USER, PASS)) {

// ğŸ”’ IskljuÄi auto-commit â€” sada MI kontroliramo kada se sprema!
veza.setAutoCommit(false);

try {
// Prva operacija
try (var ps1 = veza.prepareStatement(
"UPDATE STUDENTI SET ime = ? WHERE jmbag = ?")) {
ps1.setString(1, "Petar");
ps1.setString(2, "0024568238");
ps1.executeUpdate();
}

// Druga operacija
try (var ps2 = veza.prepareStatement(
"UPDATE STUDENTI SET prezime = ? WHERE jmbag = ?")) {
ps2.setString(1, "IviÄiÄ‡");
ps2.setString(2, "0024568238");
ps2.executeUpdate();
}

// âœ… Sve OK â€” spremi promjene!
veza.commit();

} catch (SQLException e) {
// âŒ NeÅ¡to je poÅ¡lo po zlu â€” vrati sve nazad!
veza.rollback();
throw e;
}
}

ğŸ”’
setAutoCommit(false)
IskljuÄuje automatsko spremanje

âœ…
commit()
Trajno sprema sve promjene

â†©ï¸
rollback()
PoniÅ¡tava sve promjene


JDBC
Auditorne vjeÅ¾be

Preuzimanje H2 baze podataka
Instalacija i pokretanje
Maven konfiguracija

ğŸ–¥ï¸ H2 konzola

Pokretanje admin konzole
Spajanje na bazu
IzvrÅ¡avanje SQL upita

âš™ï¸ Konfiguracija

Properties datoteke
ÄŒitanje konfiguracijskih podataka
Best practices

ğŸ’» PraktiÄni rad

Kreiranje tablice STUDENTI
INSERT, SELECT operacije
Testiranje kroz konzolu

ğŸ“¥ Preuzimanje H2 baze podataka

Da bi se iz IntelliJ-a mogla ostvariti veza s H2 bazom podataka, prvo je potrebno preuzeti i pokrenuti instancu H2 baze.

1

Otvori sluÅ¾benu stranicu
Idi na h2database.com/html/main.html

2

Preuzmi Platform-Independent verziju
Odaberi "All Platforms (zip)" â€” radi na Windows, Mac i Linux!

3

Raspakiraj arhivu
Ekstrahiraj ZIP datoteku (~9.5 MB) na Å¾eljenu lokaciju â€” to je to! ğŸ‰

ğŸ’¡

Aktualna verzija: 2.4.240
H2 je potpuno napisan u Javi â€” ne treba ti nikakva dodatna instalacija!

ğŸ“ Struktura H2 instalacije

ğŸ“ h2/
â”œâ”€â”€ ğŸ“ bin/
â”‚   â”œâ”€â”€ ğŸ”¹ h2.bat      â† Windows
â”‚   â”œâ”€â”€ ğŸ”¹ h2.sh       â† Linux/Mac
â”‚   â”œâ”€â”€ ğŸ”¹ h2w.bat
â”‚   â””â”€â”€ ğŸ“¦ h2-2.3.232.jar
â”œâ”€â”€ ğŸ“ docs/
â”œâ”€â”€ ğŸ“ service/
â”œâ”€â”€ ğŸ“ src/
â”œâ”€â”€ ğŸ“„ build.bat
â””â”€â”€ ğŸ“„ build.sh

ğŸ”‘ KljuÄne datoteke

h2.bat
PokreÄ‡e H2 (Windows)

h2.sh
PokreÄ‡e H2 (Linux/Mac)

h2-*.jar
JDBC driver

ğŸ¯

Pro tip
Spremi H2 folder na lokaciju bez razmaka u putanji, npr. C:\tools\h2

ğŸš€ Pokretanje H2 administracijske konzole

1

Pokreni H2 server

Terminal / CMD

# Windows
cd C:\tools\h2\bin
h2.bat

# Linux / Mac
cd /opt/h2/bin
./h2.sh

2

Automatski se otvara browser
H2 konzola se otvara na http://localhost:8082

âš ï¸ VaÅ¾no!
Terminal/CMD prozor mora ostati otvoren dok koristiÅ¡ H2 bazu. Ako ga zatvoriÅ¡, server se gasi!

ğŸ”— Spajanje na bazu kroz konzolu

ğŸ“ Podaci za prijavu

Polje
Vrijednost

Saved Settings
Generic H2 (Server)

Driver Class
org.h2.Driver

JDBC URL
jdbc:h2:tcp://localhost/~/Java-2025

User Name
student

Password
student

ğŸ§ª

Test Connection
Uvijek prvo klikni "Test Connection" da provjeriÅ¡ je li sve OK prije spajanja!

ğŸ” Dekodiranje URL-a

jdbc:h2 â†’ H2 baza
tcp://localhost â†’ server mod
~/ â†’ home direktorij
Java-2025 â†’ naziv baze

âš¡ IzvrÅ¡avanje SQL upita

Nakon uspjeÅ¡ne prijave moÅ¾eÅ¡ izvrÅ¡avati SQL naredbe direktno u konzoli:

H2 Console - SQL Statement

-- Kreiranje tablice STUDENTI
CREATE TABLE STUDENTI (
id             INT NOT NULL GENERATED ALWAYS AS IDENTITY,
jmbag          VARCHAR(20) NOT NULL,
ime            VARCHAR(50) NOT NULL,
prezime        VARCHAR(50) NOT NULL,
datum_rodjenja DATE NOT NULL,
PRIMARY KEY (id)
);

-- Unos test podataka
INSERT INTO STUDENTI (jmbag, ime, prezime, datum_rodjenja)
VALUES ('0036374849', 'Pero', 'PeriÄ‡', '1994-01-01');

INSERT INTO STUDENTI (jmbag, ime, prezime, datum_rodjenja)
VALUES ('0024568238', 'Ivo', 'IviÄ‡', '1993-01-01');

-- Provjera podataka
SELECT * FROM STUDENTI;

â–¶ï¸
Run
IzvrÅ¡ava sve naredbe

âœ‚ï¸
Run Selected
Samo oznaÄeni dio

âŒ¨ï¸
Ctrl + Enter
Brzo izvrÅ¡avanje

âš™ï¸ Properties datoteke

Properties datoteke sluÅ¾e za pohranu konfiguracijskih podataka izvan programskog koda. Na taj naÄin izbjegavamo "hardkodiranje" i omoguÄ‡avamo promjenu postavki bez ponovnog kompajliranja!

âŒ Hardkodirano â€” NE RADI OVO!

// Lozinka u kodu = sigurnosni rizik! ğŸ’€
String url = "jdbc:h2:tcp://localhost/~/Java-2025";
String user = "student";
String pass = "student";

âœ… Properties datoteka â€” KORISTI OVO!

# database.properties
bazaPodatakaUrl = jdbc:h2:tcp://localhost/~/Java-2025
korisnickoIme = student
lozinka = student

ğŸ”‘

Key-Value princip
Svaki kljuÄ ima svoju vrijednost. KljuÄevi ostaju isti u kodu, a vrijednosti se mogu mijenjati bez recompilea!

ğŸ“– ÄŒitanje Properties datoteke â€” Java 25

database.properties

# Podaci za spajanje na bazu podataka
bazaPodatakaUrl = jdbc:h2:tcp://localhost/~/Java-2025
korisnickoIme = student
lozinka = student

DatabaseUtil.java

private static final String DATABASE_FILE = "database.properties";

public static Connection connectToDatabase() throws SQLException, IOException {

// âœ¨ Try-with-resources za automatsko zatvaranje FileReader-a
try (var reader = new FileReader(DATABASE_FILE)) {

var properties = new Properties();
properties.load(reader);

// DohvaÄ‡anje vrijednosti prema kljuÄu
var url  = properties.getProperty("bazaPodatakaUrl");
var user = properties.getProperty("korisnickoIme");
var pass = properties.getProperty("lozinka");

return DriverManager.getConnection(url, user, pass);
}
}

âš ï¸ Nikad ne ukljuÄuj .properties u Git!
Dodaj database.properties u .gitignore â€” lozinke ne smiju zavrÅ¡iti u repozitoriju!

ğŸ“¦ Maven konfiguracija

Za koriÅ¡tenje H2 drivera u Maven projektu, dodaj ovu ovisnost:

pom.xml

<dependencies>

<!-- H2 Database Driver -->
<dependency>
<groupId>com.h2database</groupId>
<artifactId>h2</artifactId>
<version>2.3.232</version>
</dependency>

</dependencies>

ğŸ”„ Koraci u IntelliJ-u

Otvori pom.xml
Dodaj dependency unutar <dependencies>
Klikni na "Load Maven Changes" ikonu ğŸ”„
PriÄekaj da se preuzme JAR

ğŸŒ

Maven Central
Najnoviju verziju uvijek moÅ¾eÅ¡ pronaÄ‡i na mvnrepository.com â€” traÅ¾i "h2 database"!

âœ… Checklist prije poÄetka rada

ğŸ“¥
H2 preuzet
ZIP raspakiran

ğŸš€
Server pokrenut
h2.bat/h2.sh radi

ğŸ“¦
Maven dependency
pom.xml aÅ¾uriran
